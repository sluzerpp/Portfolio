async function init(){initScrollSection(),initIntroBg(),initStickyHeader(),initSectionTitles(),initStack(),initImageView(),initTabs(),initMobileNav(),initContacts(),initAnchorLinks()}function initScrollSection(){function t(){const t=i-s,o=e.getBoundingClientRect().top;let c=o/(l-r);c>0&&(c=0),c<-1&&(c=-1),p=c*t*-1,n.scrollTo({top:0,left:p}),e.getBoundingClientRect().top<=0&&e.getBoundingClientRect().bottom>r?(n.classList.add("fixed"),n.classList.add("bottom")):(e.getBoundingClientRect().top>-20&&n.classList.remove("bottom"),n.classList.remove("fixed")),m.style.marginTop=u-g*c+"rem"}const e=document.querySelector(".wrapper"),n=document.querySelector(".scroll"),o=document.querySelectorAll(".card");let i=0;for(let t of o)i+=Number.parseInt(window.getComputedStyle(t).width);const l=window.innerWidth>800?3500:2e3;e.style.height=l+"px";let c=window.getComputedStyle(o[0]),s=Number.parseInt(c.width),r=Number.parseInt(c.height);const d=sessionStorage.getItem("lastscroll"),a=localStorage.getItem("bottom");d&&scrollTo(0,d),a&&n.classList.add("bottom"),window.addEventListener("beforeunload",()=>{sessionStorage.setItem("lastscroll",scrollY),n.classList.contains("bottom")?localStorage.setItem("bottom",!0):localStorage.removeItem("bottom")});let m=document.querySelector(".scroll__bg");const u=30*Math.random(),g=80;let p=0;m.style.marginTop=u+"rem",document.addEventListener("scroll",()=>{requestAnimationFrame(t)}),n.addEventListener("scroll",()=>{n.scrollTo({top:0,left:p})})}function initIntroBg(){function t(t){n[0].style.marginLeft=i*t-o+"px",n[1].style.marginLeft=o-i*t+"px"}const e=document.querySelector(".intro__bg"),n=document.querySelectorAll(".intro__bg > div");let o=.3*window.innerWidth,i=.7*window.innerWidth;n[0].style.marginLeft=-o+"px",n[1].style.marginLeft=o+"px",addElementTopScrollHandler(e,t)}function initStickyHeader(){function t(){window.scrollY>n?e.classList.add("sticky"):e.classList.remove("sticky")}const e=document.querySelector(".header"),n=e.offsetTop;window.addEventListener("scroll",t)}function initMobileNav(){const t=document.querySelector(".burger"),e=document.querySelector(".mobile");t.addEventListener("click",()=>{if(e.classList.contains("top")||e.classList.contains("bottom"))return e.classList.remove("open"),t.classList.remove("open"),void setTimeout(()=>{e.classList.remove("top"),e.classList.remove("bottom")},300);const n=t.getBoundingClientRect().top+scrollY+t.clientHeight/2,o=t.getBoundingClientRect().bottom-t.clientHeight/2;Math.abs(n-o)>=e.clientHeight?e.classList.add("bottom"):e.classList.add("top"),e.classList.add("open"),t.classList.add("open")})}function initSectionTitles(){const t=document.querySelectorAll(".section__title");t.forEach(t=>{const e=parseInt(window.getComputedStyle(t).marginLeft);addElementMiddleScrollHandler(t,n=>{t.style.marginLeft=e*(1-n)+"px",t.style.opacity=n})})}function initStack(){const t=document.querySelector(".stack__items");addElementMiddleScrollHandler(t,e=>{t.style.opacity=e,t.style.gap=`2rem ${4*(1-e)+2}rem`},.6)}function initImageView(){const t="open_image",e=document.querySelector(".image_view__close"),n=document.querySelector(".image_view > img"),o=document.querySelector(".image_view");document.body.addEventListener("click",e=>{if(e.target.classList.contains("image")){const i=e.target;n.src=i.src,n.alt=i.alt,o.classList.remove("hidden"),document.body.classList.add(t)}});const i=()=>{document.body.classList.remove(t),setTimeout(()=>{o.classList.add("hidden")},500)};o.addEventListener("click",i),e.addEventListener("click",i)}function initTabs(){const t=document.querySelector(".about__headers"),e=document.querySelectorAll(".about__header"),n=document.querySelectorAll(".about__content"),o=parseInt(window.getComputedStyle(t).marginLeft);addElementMiddleScrollHandler(t,e=>{t.style.marginLeft=o*(1-e)+"px",t.style.opacity=e},.7);const i=[];n.forEach(t=>{i.push(t.textContent)}),n.forEach((t,e)=>{const n=t.textContent;addElementMiddleScrollHandler(t,e=>{t.classList.contains("hidden")||(t.textContent=n.substring(0,Math.round(n.length*e)))},.7)});const l=()=>{e.forEach(t=>{t.classList.remove("active")})},c=t=>{n.forEach(t=>{t.classList.add("hidden")}),n.forEach((e,n)=>{if(n==t){e.classList.remove("hidden");const n=getElementCurrentMiddlePercent(e);e.textContent=i[t].substring(0,Math.round(i[t].length*n))}})};t.addEventListener("click",t=>{const e=t.target;if(e.classList.contains("about__header")){l();const t=parseInt(e.dataset.id);e.classList.add("active"),c(t)}})}function initContacts(){function t(t){c[0].style.marginLeft=r*t-s+"px",c[1].style.marginLeft=s-r*t+"px"}const e=document.querySelectorAll(".contacts__item"),n=document.querySelector(".contacts__text"),o=window.innerWidth/window.innerHeight<1.78?.95:.8;e.forEach(t=>{const e=parseInt(window.getComputedStyle(t).marginLeft);addElementMiddleScrollHandler(t,n=>{t.style.marginLeft=e*(1-n)+"px",t.style.opacity=n},.95)});const i=parseInt(window.getComputedStyle(n).marginTop);addElementMiddleScrollHandler(n,t=>{n.style.marginTop=i*(1-t)+"px",n.style.opacity=t},o);const l=document.querySelector(".contacts__bg"),c=document.querySelectorAll(".contacts__bg > div");let s=.5*window.innerWidth,r=.3*window.innerWidth;c[0].style.marginLeft=-s+"px",c[1].style.marginLeft=s+"px",addElementMiddleScrollHandler(l,t,.8)}function initAnchorLinks(){let t=window.getComputedStyle(document.documentElement).getPropertyValue("--header-height");t=parseInt(t);const e=document.querySelectorAll(".anchor");e.forEach(e=>{const n=document.querySelector(e.getAttribute("href"));n&&e.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:n.offsetTop-t,behavior:"smooth"})})})}function addElementTopScrollHandler(t,e){let n=0,o=t.clientHeight;const i=()=>{const i=t.getBoundingClientRect().top,l=o+i;n=1-l/o,n<0&&(n=0),n>1&&(n=1),e(n)};document.addEventListener("scroll",i)}function addElementMiddleScrollHandler(t,e,n=.75){let o=window.innerHeight*n;const i=t.getBoundingClientRect().top+window.scrollY,l=i+t.clientHeight/2,c=l-window.innerHeight*(1-n),s=l-c;document.addEventListener("scroll",()=>{const t=window.scrollY+o,n=t-c;let i=n/s;i<0&&(i=0),i>1&&(i=1),e(i)})}function getElementCurrentMiddlePercent(t,e=.75){const n=window.innerHeight*e,o=t.getBoundingClientRect().top+window.scrollY,i=o+t.clientHeight/2,l=i-window.innerHeight*(1-e),c=i-l,s=window.scrollY+n,r=s-l;let d=r/c;return d<0&&(d=0),d>1&&(d=1),d}init().then(()=>{document.body.classList.remove("load")});